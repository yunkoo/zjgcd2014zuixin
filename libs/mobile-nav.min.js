angular.module("ajoslin.mobile-navigate",[]).run(["$navigate","$rootScope",function(A,B){document.addEventListener("deviceready",function(){document.addEventListener("backbutton",function(){B.$apply(function(){var C=A.back();if(!C){navigator.app.exitApp()}})})})}]);angular.module("ajoslin.mobile-navigate").provider("$change",function(){var E={"modal":["modal",""],"none":["",""]};var D={"prefix":"mb-"};var F="in";var H="out";var C="reverse";var G="done";var A=(function(){var I=navigator.userAgent.toLowerCase();return I.indexOf("android")>-1})();var B;if(A){B="webkitAnimationEnd"}else{B="animationName" in document.documentElement.style?"animationend":"webkitAnimationEnd"}this.setTransitionPreset=function(K,J,I){J=J||"";I=I||J;E[K]=[J,I]};this.options=function(I){D=angular.extend(D,I||{})};this.$get=["$q","$rootScope",function(K,I){return function J(Y,T,W,O,U){U=angular.extend(U||{},D);var V=K.defer(),L,N;function P(Z){return Z.reduce(function(b,a){return b+(a?(" "+U.prefix+a):"")},"")}var S=E[W]?E[W]:[W,W];Y.css("z-index","-100");Y[0].offsetWidth+=0;var X=P([O?H:F,(L=S[O?1:0]),O&&C||""]);Y.addClass(X);var R;if(T){R=P([O?F:H,(N=S[O?0:1]),O&&C||""]);T.addClass(R)}Y.css("z-index","");Y[0].offsetWidth+=0;function M(){I.$apply(function(){V.resolve()})}var Q;if(L&&L.length){(Q=Y).bind(B,M)}else{if(T&&N&&N.length){(Q=T).bind(B,M)}else{V.resolve()}}V.promise.then(function(){Q&&Q.unbind(B,M);Y.removeClass(X);T&&T.removeClass(R)});V.promise.cancel=function(){V.resolve()};return V.promise}}]});angular.module("ajoslin.mobile-navigate").provider("$navigate",function(){this.$get=["$rootScope","$location","$route",function(I,C,H){var G={},D=[];function A(P,O,L){var N=P,K=O||"slide",J=L,M;this.transition=function(){var Q;if(M){Q=M;M=null}else{Q=K}return Q};this.path=function(){return N};this.reverse=function(){return J};this.transitionOnce=function(Q){M=Q}}function B(J,L,M,K){I.$broadcast("$pageTransitionStart",J,L,M,K);G.current=G.next}G.onRouteSuccess=null;function E(J,L,K){G.current&&D.push([G.current,L]);G.next=new A(C.path());G.next.transitionOnce("none");B(G.next);G.onRouteSuccess=null}I.$on("$routeChangeSuccess",function(J,L,K){if(!L.$$route||!L.$$route.redirectTo){(G.onRouteSuccess||E)(J,L,K)}I.$broadcast("$pageNaved",D,L,K)});G.go=function F(L,K,J){if(typeof K=="boolean"){J=K;K=null}C.path(L);G.onRouteSuccess=function(M,O,N){G.current&&D.push([G.current,O]);G.next=new A(L,K||(O.$$route&&O.$$route.transition),J);B(G.next,G.current,false)}};G.eraseHistory=function(J,K){D=[];if(K){D.push([J,K])}return D};G.getHistory=function(){return D};G.back=function(){try{if(D.length>0){var K=D[D.length-1][0];C.path(K.path());G.onRouteSuccess=function(){D.pop();G.next=K;B(G.next,G.current,true,true)};return true}return false}catch(J){return false}};return G}]});angular.module("ajoslin.mobile-navigate").directive("mobileView",["$rootScope","$compile","$controller","$route","$change","$q",function(A,G,B,E,F,D){function C(J,K,I){function H(O){var M=E.current,N=M&&M.locals;O.element=angular.element(document.createElement("div"));O.element.html(N.$template);O.element.addClass("mb-page");O.scope=J.$new();if(M.controller){N.$scope=O.scope;O.controller=B(M.controller,N);O.element.contents().data("$ngControllerController",O.controller)}G(O.element.contents())(O.scope);if(N&&N.$template){K.append(O.element)}O.scope.$emit("$viewContentLoaded");O.scope.$eval(I.onLoad);return O}var L;J.$on("$pageTransitionStart",function(P,N,O,Q,R){function M(){var U=E.current&&E.current.$$route||{};if(R){Q=true}var W=Q?O.transition():N.transition();H(N);if(N.reverse()||U.reverse){if(!R){Q=!Q}}function V(){var X=F(N.element,(O?O.element:null),W,Q);X.then(function(){if(O){A.$broadcast("$pageTransitionSuccess",N,O);O.scope.$destroy();O.element.remove();O=undefined}});return X}N.element.css("display","none");var S=J.$eval(I.deferTransition)||D.when();S.cancel=function(){T=true;N.element.css("display","")};var T=false;S.then(function(){if(!T){N.element.css("display","");return V()}});return S}L&&L.cancel();L=M(N,O,Q)})}return{restrict:"EA",link:C}}]).directive("scrollable",["$route",function(B){var A={};return{restrict:"EA",link:function(H,D,F){var C=B.current?B.current.$$route:{};var G=C.templateUrl||C.template;var E=D[0];if(G){setTimeout(function(){var I=A[G];if(I){E.scrollTop=I}});H.$on("$destroy",function(){A[G]=E.scrollTop})}}}}]);